{% extends 'base.html' %}
{% block content %}

<form method="POST">
    {% csrf_token %}
</form> 

<div id=" event-idea"class="container text-center mt-5">
    <h2>AI-Powered Event Concept Generator</h2>
    <p>Here's an event idea for you:</p>
    <h3 class="text-primary">{{ event_idea }}</h3>
    <a href="{% url 'ai_generator' %}" class="btn btn-primary mt-3"><button onclick="generateIdea()" id="generate-idea-btn">Generate Another Idea</button></a>
</div>

<script>
    function getCSRFToken() {
        return document.querySelector('[name=csrfmiddlewaretoken]').value;
    }
    
    document.getElementById('generate-idea-btn').addEventListener('click', function() {
        fetch('/ai_generate/', {
            method: 'POST',
            headers: {
                'X-CSRFToken': getCSRFToken(),
                'Content-Type': 'application/json'
            },
            body: JSON.stringify({})
        })
        .then(response => response.json())
        .then(data => {
            document.getElementById('event-idea').innerText = data.idea;
        })
        .catch(error => console.error('Error:', error));
    });
    </script>
    
{% endblock %}
